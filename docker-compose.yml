version: "3"
services:
    elastic:
        image: "elasticsearch:7.14.2"
        env_file: 
            - ./.env_elastic
        environment:
            - "logger.level=WARN"
            - "discovery.type=single-node"
            - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
        ports:
            - 9200:9200
            - 9300:9300
        volumes:
            - ./data-es:/usr/share/elasticsearch/data:rw
    nominatim:
        image: "mediagis/nominatim:3.7"
        env_file: 
            - ./.env_nominatim
        ports:
            - "8081:8080"
            - "5431:5432"
        volumes:
            - ./data-osm/berkeley.osm.pbf:/nominatim/data/berkeley.osm.pbf
    # client:
    #     container_name: client
    #     build:
    #         context: ./client
    #         dockerfile: Dockerfile
    #     ports:
    #         - 8082:3000
